# PDF Engine

Веб-приложение для работы с PDF-документами: 
- хранение,
- поиск,
- переформатирование в форматы txt/md/tex,
- обработка с помощью llm,
- совместная работы с другими пользователями.

---

### Версии файлоы

Пользователь загружает PDF и дальше может с ним работать:

- смотреть **Изначальный** PDF,
- запускать обработку и получать результат во вкладке **Текущая**,
- при необходимости сохранять результат как **Последняя сохранённая** версия или же удалять изменения,
- искать по тексту документа,
- скачивать PDF / TeX / TXT / MD.

### Режимы обработки

1) **Предобработка (без LLM)**  
   Берёт извлечённый текст из исходного PDF и собирает TeX/PDF.

2) **Обработка через LLM (OpenRouter)**  
   LLM получает вход TeX + параметры обработки и возвращает LaTeX, который затем компилируется в PDF.

### Совместная работа
- Автор документа может выдавать/забирать доступ к документу другим пользователям, добавив их логин в специальное поле.

---

## Стек

### Backend
- Python 3.11
- FastAPI + Uvicorn
- Jinja2 templates
- SQLAlchemy 2.0 + SQLite

### Очередь
- Redis
- RQ (Redis Queue) + воркер

### PDF/TeX
- PyMuPDF (fitz) — извлечение текста из PDF
- TeX toolchain (LuaLaTeX/XeLaTeX) - компиляция tex в pdf

### LLM
- OpenRouter API, модель задаётся в .env

---

## Установка и запуск

```bash
git clone https://github.com/Kamyshanskii/pdf_engine.git
cd pdf_engine

cp .env.example .env
# Получаем API-ключ на https://openrouter.ai/settings/keys и копируем в OPENROUTER_API_KEY в файле .env

docker compose up -d --build
